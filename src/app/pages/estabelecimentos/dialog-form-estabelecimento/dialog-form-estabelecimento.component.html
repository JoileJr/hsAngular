<h1 mat-dialog-title>{{ edicao ? 'Editar Barbearia' : 'Cadastrar Barbearia' }}</h1>

<div mat-dialog-content>
  <form [formGroup]="form">
    <mat-form-field>
      <mat-label>Nome</mat-label>
      <input matInput formControlName="nome">
      <mat-error *ngIf="form.get('nome')?.hasError('required')">Nome é obrigatório</mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label>CNPJ</mat-label>
      <input matInput formControlName="cnpj">
      <mat-error *ngIf="form.get('cnpj')?.hasError('required')">CNPJ é obrigatório</mat-error>
      <mat-error *ngIf="form.get('cnpj')?.hasError('pattern')">CNPJ inválido</mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Horário de Funcionamento</mat-label>
      <input matInput formControlName="horario_funcionamento">
      <mat-error *ngIf="form.get('horario_funcionamento')?.hasError('required')">Horário de funcionamento é obrigatório</mat-error>
    </mat-form-field>

    <fieldset formGroupName="endereco">
      <legend>Endereço</legend>

      <mat-form-field>
        <mat-label>Logradouro</mat-label>
        <input matInput formControlName="logradouro">
        <mat-error *ngIf="form.get('endereco.logradouro')?.hasError('required')">Logradouro é obrigatório</mat-error>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Número</mat-label>
        <input matInput formControlName="numero">
        <mat-error *ngIf="form.get('endereco.numero')?.hasError('required')">Número é obrigatório</mat-error>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Complemento</mat-label>
        <input matInput formControlName="complemento">
      </mat-form-field>

      <mat-form-field>
        <mat-label>Bairro</mat-label>
        <input matInput formControlName="bairro">
        <mat-error *ngIf="form.get('endereco.bairro')?.hasError('required')">Bairro é obrigatório</mat-error>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Cidade</mat-label>
        <input matInput formControlName="cidade">
        <mat-error *ngIf="form.get('endereco.cidade')?.hasError('required')">Cidade é obrigatória</mat-error>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Estado</mat-label>
        <input matInput formControlName="estado" maxlength="2">
        <mat-error *ngIf="form.get('endereco.estado')?.hasError('required')">Estado é obrigatório</mat-error>
        <mat-error *ngIf="form.get('endereco.estado')?.hasError('maxlength')">Estado deve ter 2 letras</mat-error>
      </mat-form-field>

      <mat-form-field>
        <mat-label>CEP</mat-label>
        <input matInput formControlName="cep">
        <mat-error *ngIf="form.get('endereco.cep')?.hasError('required')">CEP é obrigatório</mat-error>
        <mat-error *ngIf="form.get('endereco.cep')?.hasError('pattern')">CEP inválido</mat-error>
      </mat-form-field>
    </fieldset>
  </form>
</div>

<div mat-dialog-actions>
  <button mat-button (click)="salvar()" [disabled]="form.invalid">Salvar</button>
  <button mat-button (click)="close()">Cancelar</button>
</div>
